<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hóa đơn</title>
    <link rel="stylesheet" href="order.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.rawgit.com/eligrey/FileSaver.js/master/FileSaver.js"></script>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/vfs_fonts.js"></script>

</head>

<body>
    <div class="content">
        <main>
            <div id="qrcode"></div>

            <div class="header">
                <div class="left">
                    <h1>Quản lý hóa đơn</h1>
                </div>
            </div>


            <div class="tab-hoadon">
                <!-- <ul>
                    <li ng-click="tabCtrl.selectTab('all')" ng-class="{ 'active': tabCtrl.isSelected('all') }">Tất cả
                    </li>
                    <li ng-click="tabCtrl.selectTab('choXacNhan')"
                        ng-class="{ 'active': tabCtrl.isSelected('choXacNhan') }">Chờ xác nhận</li>
                    <li ng-click="tabCtrl.selectTab('choLayHang')"
                        ng-class="{ 'active': tabCtrl.isSelected('choLayHang') }">Chờ lấy hàng</li>
                    <li ng-click="tabCtrl.selectTab('dangGiao')"
                        ng-class="{ 'active': tabCtrl.isSelected('dangGiao') }">Đang giao</li>
                    <li ng-click="tabCtrl.selectTab('huy')" ng-class="{ 'active': tabCtrl.isSelected('huy') }">Hủy</li>
                    <li ng-click="tabCtrl.selectTab('giaoThanhCong')"
                        ng-class="{ 'active': tabCtrl.isSelected('giaoThanhCong') }">Giao thành công</li>
                    <li ng-click="tabCtrl.selectTab('giaoThatBai')"
                        ng-class="{ 'active': tabCtrl.isSelected('giaoThatBai') }">Giao không thành công</li>
                </ul> -->
                <ul>
                    <li ng-click="selectTab('all')" ng-class="{ 'active': isSelected('all') }">Tất cả</li>
                    <li ng-click="selectTab('choXacNhan')" ng-class="{ 'active': isSelected('choXacNhan') }">Chờ xác
                        nhận</li>
                    <li ng-click="selectTab('cholayhang')" ng-class="{ 'active': isSelected('cholayhang') }">Chờ lấy
                        hàng</li>
                    <li ng-click="selectTab('danggiao')" ng-class="{ 'active': isSelected('danggiao') }">Đang giao</li>
                    <li ng-click="selectTab('huy')" ng-class="{ 'active': isSelected('huy') }">Hủy</li>
                    <li ng-click="selectTab('giaothanhcong')" ng-class="{ 'active': isSelected('giaothanhcong') }">Giao
                        thành công</li>
                    <li ng-click="selectTab('khonggiaothanhcong')"
                        ng-class="{ 'active': isSelected('khonggiaothanhcong') }">Giao không thành công</li>
                    <li ng-click="selectTab('taiquay')" ng-class="{ 'active': isSelected('taiquay') }">Tại quầy</li>
                    <!-- Thêm các tab khác tương tự -->
                </ul>
            </div>
            <!-- Danh sach hoa don tat ca -->
            <div class="danhsach-thuoctinh" ng-show="isSelected('all')">
                <div class="bottom-data">
                    <div class="orders">
                        <div class="header">
                            <i class='bx bx-receipt'></i>
                            <h3>List</h3>
                            <div class="tienich">
                                <div class="search-product" id="search-container">
                                    <p></p>
                                    <input type="text" placeholder="Điền hóa đơn cần tìm">
                                    <i class='bx bx-search' id="search-icon"></i>
                                </div>
                                <i class='bx bx-x' id="close-icon"></i>
                                <div class="dropdown-tienich">
                                    <button id="dropdown-toggle" class="btn-dropdown">
                                        QR Code hóa đơn <i class='bx bx-qr'></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <!-- <th class="checkbox">
                                        <input type="checkbox" id="selectAllCheckbox">
                                    </th> -->
                                    <th>Mã hóa đơn</th>
                                    <th>Khách hàng</th>
                                    <th>Số điện thoại</th>
                                    <th>Tổng tiền</th>
                                    <th>Ngày mua</th>
                                    <th>Nhân viên</th>
                                    <th>Trạng thái</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat-start="order in orders">
                                    <!-- <td> <input type="checkbox"></td> -->
                                    <td>
                                        <p>{{order.code}}</p>
                                    </td>
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.username}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.name_user}}</p>
                                    </td>
                                    <!-- sdt -->
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.phone}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.sdt_user}}</p>
                                    </td>
                                    <td>{{order.total_money}}<u>VND</u></td>
                                    <td>10/14/2023</td>
                                    <td>45</td>
                                    <td ng-if="order.status===0"><span class="status pending">Chờ xác nhận</span></td>
                                    <td ng-if="order.status===1"><span class="status cholayhang">Chờ lấy hàng</span>
                                    </td>
                                    <td ng-if="order.status===2"><span class="status process">Đang giao</span></td>
                                    <td ng-if="order.status===7"><span class="status completed">Thành công</span></td>
                                    <td>
                                        <i class='bx bx-dots-horizontal-rounded' style='color:black'
                                            ng-click="toggleDetails(order)"></i>
                                    </td>
                                </tr>

                                <tr class="edit-tr" ng-repeat-end ng-show="order.showDetails">
                                    <td colspan="9">
                                        <div class="edit-thuoctinh">
                                            <div class="invoice-noidung">
                                                <div class="invoice-left">
                                                    <h3>Thông tin khách hàng</h3>
                                                    <div class="contact-left">
                                                        <span class="content-left">
                                                            <!-- Ten khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.name_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.account.username"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <!-- Sdt khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.sdt_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.account.phone"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                        </span>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account === null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true" ng-model="order.address_user"
                                                                name="" id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account !== null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true"
                                                                ng-model="getCombinedAddress(order.address)" name=""
                                                                id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Người bán<span>*</span></label><br>
                                                                <input disabled="true" class="custom-input" type="text"
                                                                    placeholder="Sheller Name">
                                                            </div>
                                                            <div>
                                                                <label>Khuyến mãi</label><br>
                                                                <input class="custom-input" type="text"
                                                                    placeholder="Điền mã khuyến mãi">
                                                            </div>
                                                        </span>
                                                        <div class="tongtien"
                                                            style="display: flex; grid-gap: 20px; align-items: center;">
                                                            <label>Tổng tiền <span>*</span></label><br>
                                                            <input ng-model="order.total_money" disabled="true"
                                                                class="custom-input" type="text">
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Thanh toán tại quầy<span>*</span></label><br>
                                                                <input ng-model="order.total_payment_off"
                                                                    disabled="true" class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                            <div>
                                                                <label>Thanh toán online</label><br>
                                                                <input ng-model="order.total_payment" disabled="true"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                        </span>
                                                        <div>
                                                            <label>Ghi chú <span>*</span></label><br>
                                                            <textarea name="" id="" cols="25" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="invoice-right" ng-if="order.account===null">
                                                    <div class="tab-hoadon">
                                                        <ul>
                                                            <li class="active">Sản phẩm mua</li>
                                                            <li>Sản phẩm khách trả</li>
                                                            <li>Sản phẩm Shop trả khách</li>
                                                        </ul>
                                                    </div>
                                                    <div>
                                                        <div class="bottom-data">
                                                            <div class="orders">
                                                                <table>
                                                                    <thead>
                                                                        <tr>
                                                                            <th>Sản phẩm</th>
                                                                            <th>Tên</th>
                                                                            <th>Giá</th>
                                                                            <th>Số lượng</th>
                                                                            <th>Tổng tiền</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr ng-repeat="ordd in order.orderDetails">
                                                                            <!-- <td ><img src="/image/images/shoe-2.png" alt=""></td> -->
                                                                            <td class="tb-anh">
                                                                                <div
                                                                                    ng-repeat="image in ordd.watchdetail.images">
                                                                                    <img src="/image/images/{{image.image_link}}.png"
                                                                                        alt="">
                                                                                </div>
                                                                            </td>
                                                                            <td class="tb-ten">
                                                                                <p>
                                                                                    {{ordd.watchdetail.product.name}}
                                                                                </p>
                                                                            </td>
                                                                            <td class="tb-tien">
                                                                                <p>
                                                                                    {{ordd.watchdetail.price}}&nbsp;<u>VND</u>
                                                                                </p>
                                                                            </td>
                                                                            <td class="tb-soluong">
                                                                                <div class="wrapper">
                                                                                    <input class="custom-input"
                                                                                        type="text" disabled
                                                                                        ng-model="ordd.quantity" />
                                                                                </div>
                                                                            </td>
                                                                            <td class="tb-tien">
                                                                                <p>
                                                                                    {{ordd.total_price}}&nbsp;<u>VND</u>
                                                                                </p>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="invoice-right" ng-if="order.account !== null">
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 500px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Sản phẩm</h3>
                                                                <div class="tienich">
                                                                    <div class="search-product-hoadon">
                                                                        <p></p>
                                                                        <input type="text"
                                                                            placeholder="Điền hóa đơn cần tìm">
                                                                        <i class='bx bx-search'></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>#</th>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Đơn giá</th>
                                                                        <th>Thành tiền</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="watch in watchs">
                                                                        <td>
                                                                            <img
                                                                                src="/image/images/{{watch.images[0].image_link}}.png">
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.code}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.product.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p style="padding-right: 20px;">
                                                                                {{watch.size.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.price}} <u>VND</u></p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.quantity_stock}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <i ng-click="addToCart(watch)"
                                                                                class='bx bx-cart-add'
                                                                                style="color: black;"></i>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 250px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Giỏ hàng</h3>
                                                                <div class="dropdown-tienich">
                                                                    <button id="dropdown-toggle" class="btn-dropdown">
                                                                        QR Code sản phẩm <i class='bx bx-qr'></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Tên</th>
                                                                        <th>Giá</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Tổng tiền</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="ordd in order.orderDetails">
                                                                        <!-- <td ><img src="/image/images/shoe-2.png" alt=""></td> -->
                                                                        <td class="tb-anh">
                                                                            <div
                                                                                ng-repeat="image in ordd.watchdetail.images">
                                                                                <img src="/image/images/{{image.image_link}}.png"
                                                                                    alt="">
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-ten">
                                                                            <p>
                                                                                {{ordd.watchdetail.product.name}}
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.watchdetail.price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-soluong">
                                                                            <div class="wrapper">
                                                                                <input class="custom-input" type="text"
                                                                                    disabled ng-model="ordd.quantity" />
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.total_price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="button" ng-if="order.account!==null">
                                            <button>Xuất QRCode</button>
                                            <button>Cập nhập</button>
                                        </div>
                                        <div class="button" ng-if="order.account===null">
                                            <button ng-click="generateQRCode(order)">Xuất QRCode</button>
                                            <button ng-click="generatePDF(order)">In hóa đơn</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                </div>
            </div>


            <!-- Danh sach hoa don cho xac nhan -->
            <div class="thuoctinh-trong" ng-show="isSelected('choXacNhan')">
                <div class="bottom-data">
                    <div class="orders">
                        <div class="header">
                            <i class='bx bx-receipt'></i>
                            <h3>Danh sách</h3>
                            <div class="tienich">
                                <div class="search-product" id="search-container">
                                    <p></p>
                                    <input type="text" placeholder="Điền sản phẩm cần tìm">
                                    <i class='bx bx-search' id="search-icon"></i>
                                </div>
                                <i class='bx bx-x' id="close-icon"></i>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                <tr>
                                    <th class="checkbox">
                                        <input type="checkbox" ng-model="selectAllCheckedCXN"
                                            ng-click="toggleSelectAllCXN()">
                                    </th>
                                    <th>Mã hóa đơn</th>
                                    <th>Khách hàng</th>
                                    <th>Số điện thoại</th>
                                    <th>Tổng tiền</th>
                                    <th>Ngày mua</th>
                                    <th>Nhân viên</th>
                                    <th>Trạng thái</th>
                                    <th>Action</th>
                                </tr>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat-start="order in orders" ng-if="order.status === 0">
                                    <td> <input type="checkbox" ng-model="order.isSelectedCXN"
                                            ng-change="updateSelectAllCXN()"></td>
                                    <td>
                                        <p>{{order.code}}</p>
                                    </td>
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.username}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.name_user}}</p>
                                    </td>
                                    <!-- sdt -->
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.phone}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.sdt_user}}</p>
                                    </td>
                                    <td>{{order.total_money}}<u>VND</u></td>
                                    <td>10/14/2023</td>
                                    <td>45</td>
                                    <td ng-if="order.status===0"><span class="status pending">Chờ xác nhận</span>
                                    <td ng-if="order.status===1"><span class="status cholayhang">Chờ lấy hàng</span>
                                    </td>
                                    <td ng-if="order.status===2"><span class="status process">Đang giao</span></td>
                                    <td ng-if="order.status===7"><span class="status completed">Thành công</span></td>
                                    <td>
                                        <i class='bx bx-dots-horizontal-rounded' style='color:black'
                                            ng-click="toggleDetails(order)"></i>
                                    </td>
                                </tr>

                                <tr class="edit-tr" ng-repeat-end ng-show="order.showDetails">
                                    <td colspan="9">
                                        <div class="edit-thuoctinh">
                                            <div class="invoice-noidung">
                                                <div class="invoice-left">
                                                    <h3>Thông tin khách hàng</h3>
                                                    <div class="contact-left">
                                                        <span class="content-left">
                                                            <!-- Ten khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.name_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.account.username"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <!-- Sdt khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.sdt_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.account.phone"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                        </span>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account === null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true" ng-model="order.address_user"
                                                                name="" id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account !== null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true"
                                                                ng-model="getCombinedAddress(order.address)" name=""
                                                                id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Người bán<span>*</span></label><br>
                                                                <input disabled="true" class="custom-input" type="text"
                                                                    placeholder="Sheller Name">
                                                            </div>
                                                            <div>
                                                                <label>Khuyến mãi</label><br>
                                                                <input class="custom-input" type="text"
                                                                    placeholder="Điền mã khuyến mãi">
                                                            </div>
                                                        </span>
                                                        <div class="tongtien"
                                                            style="display: flex; grid-gap: 20px; align-items: center;">
                                                            <label>Tổng tiền <span>*</span></label><br>
                                                            <input ng-model="order.total_money" disabled="true"
                                                                class="custom-input" type="text">
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Thanh toán tại quầy<span>*</span></label><br>
                                                                <input ng-model="order.total_payment_off"
                                                                    disabled="true" class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                            <div>
                                                                <label>Thanh toán online</label><br>
                                                                <input ng-model="order.total_payment" disabled="true"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                        </span>
                                                        <div>
                                                            <label>Ghi chú <span>*</span></label><br>
                                                            <textarea name="" id="" cols="25" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="invoice-right" ng-if="order.account !== null">
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 500px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Sản phẩm</h3>
                                                                <div class="tienich">
                                                                    <div class="search-product-hoadon">
                                                                        <p></p>
                                                                        <input type="text"
                                                                            placeholder="Điền hóa đơn cần tìm">
                                                                        <i class='bx bx-search'></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>#</th>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Đơn giá</th>
                                                                        <th>Thành tiền</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="watch in watchs">
                                                                        <td>
                                                                            <img
                                                                                src="/image/images/{{watch.images[0].image_link}}.png">
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.code}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.product.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p style="padding-right: 20px;">
                                                                                {{watch.size.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.price}} <u>VND</u></p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.quantity_stock}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <i ng-click="addToCart(watch)"
                                                                                class='bx bx-cart-add'
                                                                                style="color: black;"></i>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 250px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Giỏ hàng</h3>
                                                                <div class="dropdown-tienich">
                                                                    <button id="dropdown-toggle" class="btn-dropdown">
                                                                        QR Code sản phẩm <i class='bx bx-qr'></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Tên</th>
                                                                        <th>Giá</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Tổng tiền</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="ordd in order.orderDetails">
                                                                        <!-- <td ><img src="/image/images/shoe-2.png" alt=""></td> -->
                                                                        <td class="tb-anh">
                                                                            <div
                                                                                ng-repeat="image in ordd.watchdetail.images">
                                                                                <img src="/image/images/{{image.image_link}}.png"
                                                                                    alt="">
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-ten">
                                                                            <p>
                                                                                {{ordd.watchdetail.product.name}}
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.watchdetail.price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-soluong">
                                                                            <div class="wrapper">
                                                                                <input class="custom-input" type="text"
                                                                                    disabled ng-model="ordd.quantity" />
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.total_price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="button" ng-if="order.account!==null">
                                            <button>Xuất QRCode</button>
                                            <button>Cập nhập</button>
                                        </div>
                                        <div class="button" ng-if="order.account===null">
                                            <button ng-click="generateQRCode(order)">Xuất QRCode</button>
                                            <button ng-click="generatePDF(order)">In hóa đơn</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="button">
                            <button ng-click="confirmSelectedOrdersCXN()">Xác nhận</button>
                            <button class="btn-huy">Hủy</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Danh sach hoa don cho lay hang -->
            <div class="thuoctinh-trong" ng-show="isSelected('cholayhang')">
                <div class="bottom-data">
                    <div class="orders">
                        <div class="header">
                            <i class='bx bx-receipt'></i>
                            <h3>Danh sách</h3>
                            <div class="tienich">
                                <div class="search-product" id="search-container">
                                    <p></p>
                                    <input type="text" placeholder="Điền sản phẩm cần tìm">
                                    <i class='bx bx-search' id="search-icon"></i>
                                </div>
                                <i class='bx bx-x' id="close-icon"></i>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                <tr>
                                    <th class="checkbox">
                                        <input type="checkbox" ng-model="selectAllCheckedXNG"
                                            ng-click="toggleSelectAllXNG()">
                                    </th>
                                    <th>Mã hóa đơn</th>
                                    <th>Khách hàng</th>
                                    <th>Số điện thoại</th>
                                    <th>Tổng tiền</th>
                                    <th>Ngày mua</th>
                                    <th>Nhân viên</th>
                                    <th>Trạng thái</th>
                                    <th>Action</th>
                                </tr>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat-start="order in orders" ng-if="order.status === 1">
                                    <td> <input type="checkbox" ng-model="order.isSelectedXNG"
                                            ng-change="updateSelectAllXNG()"></td>
                                    <td>
                                        <p>{{order.code}}</p>
                                    </td>
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.username}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.name_user}}</p>
                                    </td>
                                    <!-- sdt -->
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.phone}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.sdt_user}}</p>
                                    </td>
                                    <td>{{order.total_money}}<u>VND</u></td>
                                    <td>10/14/2023</td>
                                    <td>45</td>
                                    <td ng-if="order.status===0"><span class="status pending">Chờ xác nhận</span>
                                    <td ng-if="order.status===1"><span class="status cholayhang">Chờ lấy hàng</span>
                                    </td>
                                    <td ng-if="order.status===2"><span class="status process">Đang giao</span></td>
                                    <td ng-if="order.status===7"><span class="status completed">Thành công</span></td>
                                    <td>
                                        <i class='bx bx-dots-horizontal-rounded' style='color:black'
                                            ng-click="toggleDetails(order)"></i>
                                    </td>
                                </tr>

                                <tr class="edit-tr" ng-repeat-end ng-show="order.showDetails">
                                    <td colspan="9">
                                        <div class="edit-thuoctinh">
                                            <div class="invoice-noidung">
                                                <div class="invoice-left">
                                                    <h3>Thông tin khách hàng</h3>
                                                    <div class="contact-left">
                                                        <span class="content-left">
                                                            <!-- Ten khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.name_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.account.username"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <!-- Sdt khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.sdt_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.account.phone"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                        </span>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account === null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true" ng-model="order.address_user"
                                                                name="" id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account !== null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true"
                                                                ng-model="getCombinedAddress(order.address)" name=""
                                                                id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Người bán<span>*</span></label><br>
                                                                <input disabled="true" class="custom-input" type="text"
                                                                    placeholder="Sheller Name">
                                                            </div>
                                                            <div>
                                                                <label>Khuyến mãi</label><br>
                                                                <input class="custom-input" type="text"
                                                                    placeholder="Điền mã khuyến mãi">
                                                            </div>
                                                        </span>
                                                        <div class="tongtien"
                                                            style="display: flex; grid-gap: 20px; align-items: center;">
                                                            <label>Tổng tiền <span>*</span></label><br>
                                                            <input ng-model="order.total_money" disabled="true"
                                                                class="custom-input" type="text">
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Thanh toán tại quầy<span>*</span></label><br>
                                                                <input ng-model="order.total_payment_off"
                                                                    disabled="true" class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                            <div>
                                                                <label>Thanh toán online</label><br>
                                                                <input ng-model="order.total_payment" disabled="true"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                        </span>
                                                        <div>
                                                            <label>Ghi chú <span>*</span></label><br>
                                                            <textarea name="" id="" cols="25" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="invoice-right" ng-if="order.account !== null">
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 500px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Sản phẩm</h3>
                                                                <div class="tienich">
                                                                    <div class="search-product-hoadon">
                                                                        <p></p>
                                                                        <input type="text"
                                                                            placeholder="Điền hóa đơn cần tìm">
                                                                        <i class='bx bx-search'></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>#</th>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Đơn giá</th>
                                                                        <th>Thành tiền</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="watch in watchs">
                                                                        <td>
                                                                            <img
                                                                                src="/image/images/{{watch.images[0].image_link}}.png">
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.code}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.product.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p style="padding-right: 20px;">
                                                                                {{watch.size.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.price}} <u>VND</u></p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.quantity_stock}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <i ng-click="addToCart(watch)"
                                                                                class='bx bx-cart-add'
                                                                                style="color: black;"></i>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 250px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Giỏ hàng</h3>
                                                                <div class="dropdown-tienich">
                                                                    <button id="dropdown-toggle" class="btn-dropdown">
                                                                        QR Code sản phẩm <i class='bx bx-qr'></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Tên</th>
                                                                        <th>Giá</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Tổng tiền</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="ordd in order.orderDetails">
                                                                        <!-- <td ><img src="/image/images/shoe-2.png" alt=""></td> -->
                                                                        <td class="tb-anh">
                                                                            <div
                                                                                ng-repeat="image in ordd.watchdetail.images">
                                                                                <img src="/image/images/{{image.image_link}}.png"
                                                                                    alt="">
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-ten">
                                                                            <p>
                                                                                {{ordd.watchdetail.product.name}}
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.watchdetail.price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-soluong">
                                                                            <div class="wrapper">
                                                                                <input class="custom-input" type="text"
                                                                                    disabled ng-model="ordd.quantity" />
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.total_price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="button" ng-if="order.account!==null">
                                            <button>Xuất QRCode</button>
                                            <button>Cập nhập</button>
                                        </div>
                                        <div class="button" ng-if="order.account===null">
                                            <button ng-click="generateQRCode(order)">Xuất QRCode</button>
                                            <button ng-click="generatePDF(order)">In hóa đơn</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="button">
                            <button ng-click="confirmSelectedOrdersXNG()">Xác nhận giao</button>
                            <button class="btn-huy">Hủy</button>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Danh sach hoa don giao hang -->
            <div class="thuoctinh-trong" ng-show="isSelected('danggiao')">
                <div class="bottom-data">
                    <div class="orders">
                        <div class="header">
                            <i class='bx bx-receipt'></i>
                            <h3>Danh sách</h3>
                            <div class="tienich">
                                <div class="search-product" id="search-container">
                                    <p></p>
                                    <input type="text" placeholder="Điền sản phẩm cần tìm">
                                    <i class='bx bx-search' id="search-icon"></i>
                                </div>
                                <i class='bx bx-x' id="close-icon"></i>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                <tr>
                                    <th class="checkbox">
                                        <input type="checkbox" ng-model="selectAllCheckedCXG"
                                            ng-click="toggleSelectAllCXG()">
                                    </th>
                                    <th>Mã hóa đơn</th>
                                    <th>Khách hàng</th>
                                    <th>Số điện thoại</th>
                                    <th>Tổng tiền</th>
                                    <th>Ngày mua</th>
                                    <th>Nhân viên</th>
                                    <th>Trạng thái</th>
                                    <th>Action</th>
                                </tr>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat-start="order in orders" ng-if="order.status === 2">
                                    <td> <input type="checkbox" ng-model="order.isSelectedCXG"
                                            ng-change="updateSelectAllCXG()"></td>
                                    <td>
                                        <p>{{order.code}}</p>
                                    </td>
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.username}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.name_user}}</p>
                                    </td>
                                    <!-- sdt -->
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.phone}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.sdt_user}}</p>
                                    </td>
                                    <td>{{order.total_money}}<u>VND</u></td>
                                    <td>10/14/2023</td>
                                    <td>45</td>
                                    <td ng-if="order.status===0"><span class="status pending">Chờ xác nhận</span>
                                    <td ng-if="order.status===1"><span class="status cholayhang">Chờ lấy hàng</span>
                                    </td>
                                    <td ng-if="order.status===2"><span class="status process">Đang giao</span></td>
                                    <td ng-if="order.status===7"><span class="status completed">Thành công</span></td>
                                    <td>
                                        <i class='bx bx-dots-horizontal-rounded' style='color:black'
                                            ng-click="toggleDetails(order)"></i>
                                    </td>
                                </tr>

                                <tr class="edit-tr" ng-repeat-end ng-show="order.showDetails">
                                    <td colspan="9">
                                        <div class="edit-thuoctinh">
                                            <div class="invoice-noidung">
                                                <div class="invoice-left">
                                                    <h3>Thông tin khách hàng</h3>
                                                    <div class="contact-left">
                                                        <span class="content-left">
                                                            <!-- Ten khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.name_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.account.username"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <!-- Sdt khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.sdt_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.account.phone"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                        </span>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account === null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true" ng-model="order.address_user"
                                                                name="" id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account !== null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true"
                                                                ng-model="getCombinedAddress(order.address)" name=""
                                                                id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Người bán<span>*</span></label><br>
                                                                <input disabled="true" class="custom-input" type="text"
                                                                    placeholder="Sheller Name">
                                                            </div>
                                                            <div>
                                                                <label>Khuyến mãi</label><br>
                                                                <input class="custom-input" type="text"
                                                                    placeholder="Điền mã khuyến mãi">
                                                            </div>
                                                        </span>
                                                        <div class="tongtien"
                                                            style="display: flex; grid-gap: 20px; align-items: center;">
                                                            <label>Tổng tiền <span>*</span></label><br>
                                                            <input ng-model="order.total_money" disabled="true"
                                                                class="custom-input" type="text">
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Thanh toán tại quầy<span>*</span></label><br>
                                                                <input ng-model="order.total_payment_off"
                                                                    disabled="true" class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                            <div>
                                                                <label>Thanh toán online</label><br>
                                                                <input ng-model="order.total_payment" disabled="true"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                        </span>
                                                        <div>
                                                            <label>Ghi chú <span>*</span></label><br>
                                                            <textarea name="" id="" cols="25" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="invoice-right" ng-if="order.account !== null">
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 500px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Sản phẩm</h3>
                                                                <div class="tienich">
                                                                    <div class="search-product-hoadon">
                                                                        <p></p>
                                                                        <input type="text"
                                                                            placeholder="Điền hóa đơn cần tìm">
                                                                        <i class='bx bx-search'></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>#</th>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Đơn giá</th>
                                                                        <th>Thành tiền</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="watch in watchs">
                                                                        <td>
                                                                            <img
                                                                                src="/image/images/{{watch.images[0].image_link}}.png">
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.code}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.product.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p style="padding-right: 20px;">
                                                                                {{watch.size.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.price}} <u>VND</u></p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.quantity_stock}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <i ng-click="addToCart(watch)"
                                                                                class='bx bx-cart-add'
                                                                                style="color: black;"></i>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 250px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Giỏ hàng</h3>
                                                                <div class="dropdown-tienich">
                                                                    <button id="dropdown-toggle" class="btn-dropdown">
                                                                        QR Code sản phẩm <i class='bx bx-qr'></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Tên</th>
                                                                        <th>Giá</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Tổng tiền</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="ordd in order.orderDetails">
                                                                        <!-- <td ><img src="/image/images/shoe-2.png" alt=""></td> -->
                                                                        <td class="tb-anh">
                                                                            <div
                                                                                ng-repeat="image in ordd.watchdetail.images">
                                                                                <img src="/image/images/{{image.image_link}}.png"
                                                                                    alt="">
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-ten">
                                                                            <p>
                                                                                {{ordd.watchdetail.product.name}}
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.watchdetail.price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-soluong">
                                                                            <div class="wrapper">
                                                                                <input class="custom-input" type="text"
                                                                                    disabled ng-model="ordd.quantity" />
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.total_price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="button" ng-if="order.account!==null">
                                            <button>Xuất QRCode</button>
                                            <button>Cập nhập</button>
                                        </div>
                                        <div class="button" ng-if="order.account===null">
                                            <button ng-click="generateQRCode(order)">Xuất QRCode</button>
                                            <button ng-click="generatePDF(order)">In hóa đơn</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="button">
                            <button ng-click="confirmSelectedOrdersCXN()" style="width: 200px;">Xác nhận thành công</button>
                            <button class="btn-huy">Hủy</button>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Danh sach hoa don tai quay -->
            <div class="thuoctinh-trong" ng-show="isSelected('taiquay')">
                <div class="bottom-data">
                    <div class="orders">
                        <div class="header">
                            <i class='bx bx-receipt'></i>
                            <h3>Danh sách</h3>
                            <div class="tienich">
                                <div class="search-product" id="search-container">
                                    <p></p>
                                    <input type="text" placeholder="Điền sản phẩm cần tìm">
                                    <i class='bx bx-search' id="search-icon"></i>
                                </div>
                                <i class='bx bx-x' id="close-icon"></i>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                <tr>
                                    <!-- <th class="checkbox">
                                        <input type="checkbox" ng-model="selectAllCheckedCXG"
                                            ng-click="toggleSelectAllCXG()">
                                    </th> -->
                                    <th>Mã hóa đơn</th>
                                    <th>Khách hàng</th>
                                    <th>Số điện thoại</th>
                                    <th>Tổng tiền</th>
                                    <th>Ngày mua</th>
                                    <th>Nhân viên</th>
                                    <th>Trạng thái</th>
                                    <th>Action</th>
                                </tr>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat-start="order in orders" ng-if="order.status === 7">
                                    <!-- <td> <input type="checkbox" ng-model="order.isSelectedCXG"
                                            ng-change="updateSelectAllCXG()"></td> -->
                                    <td>
                                        <p>{{order.code}}</p>
                                    </td>
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.username}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.name_user}}</p>
                                    </td>
                                    <!-- sdt -->
                                    <td ng-if="order.account!==null">
                                        <p>{{order.account.phone}}</p>
                                    </td>
                                    <td ng-if="order.account===null">
                                        <p>{{order.sdt_user}}</p>
                                    </td>
                                    <td>{{order.total_money}}<u>VND</u></td>
                                    <td>10/14/2023</td>
                                    <td>45</td>
                                    <td ng-if="order.status===0"><span class="status pending">Chờ xác nhận</span>
                                    <td ng-if="order.status===1"><span class="status cholayhang">Chờ lấy hàng</span>
                                    </td>
                                    <td ng-if="order.status===2"><span class="status process">Đang giao</span></td>
                                    <td ng-if="order.status===7"><span class="status completed">Thành công</span></td>
                                    <td>
                                        <i class='bx bx-dots-horizontal-rounded' style='color:black'
                                            ng-click="toggleDetails(order)"></i>
                                    </td>
                                </tr>

                                <tr class="edit-tr" ng-repeat-end ng-show="order.showDetails">
                                    <td colspan="9">
                                        <div class="edit-thuoctinh">
                                            <div class="invoice-noidung">
                                                <div class="invoice-left">
                                                    <h3>Thông tin khách hàng</h3>
                                                    <div class="contact-left">
                                                        <span class="content-left">
                                                            <!-- Ten khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.name_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Tên khách hàng</label><br>
                                                                <input disabled="true" ng-model="order.account.username"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Tên khách hàng">
                                                            </div>
                                                            <!-- Sdt khach hang -->
                                                            <div ng-if="order.account === null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.sdt_user"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                            <div ng-if="order.account !== null">
                                                                <label>Số điện thoại <span>*</span></label><br>
                                                                <input disabled="true" ng-model="order.account.phone"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Số điện thoại khách hàng">
                                                            </div>
                                                        </span>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account === null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true" ng-model="order.address_user"
                                                                name="" id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <!-- Dia chi -->
                                                        <div ng-if="order.account !== null">
                                                            <label>Địa chỉ chi tiết <span>*</span></label><br>
                                                            <textarea disabled="true"
                                                                ng-model="getCombinedAddress(order.address)" name=""
                                                                id="" cols="30" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Người bán<span>*</span></label><br>
                                                                <input disabled="true" class="custom-input" type="text"
                                                                    placeholder="Sheller Name">
                                                            </div>
                                                            <div>
                                                                <label>Khuyến mãi</label><br>
                                                                <input class="custom-input" type="text"
                                                                    placeholder="Điền mã khuyến mãi">
                                                            </div>
                                                        </span>
                                                        <div class="tongtien"
                                                            style="display: flex; grid-gap: 20px; align-items: center;">
                                                            <label>Tổng tiền <span>*</span></label><br>
                                                            <input ng-model="order.total_money" disabled="true"
                                                                class="custom-input" type="text">
                                                        </div>
                                                        <span class="content-left">
                                                            <div>
                                                                <label>Thanh toán tại quầy<span>*</span></label><br>
                                                                <input ng-model="order.total_payment_off"
                                                                    disabled="true" class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                            <div>
                                                                <label>Thanh toán online</label><br>
                                                                <input ng-model="order.total_payment" disabled="true"
                                                                    class="custom-input" type="text"
                                                                    placeholder="Điền số tiền">
                                                            </div>
                                                        </span>
                                                        <div>
                                                            <label>Ghi chú <span>*</span></label><br>
                                                            <textarea name="" id="" cols="25" rows="5"
                                                                placeholder="Note here"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="invoice-right" ng-if="order.account !== null">
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 500px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Sản phẩm</h3>
                                                                <div class="tienich">
                                                                    <div class="search-product-hoadon">
                                                                        <p></p>
                                                                        <input type="text"
                                                                            placeholder="Điền hóa đơn cần tìm">
                                                                        <i class='bx bx-search'></i>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>#</th>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Đơn giá</th>
                                                                        <th>Thành tiền</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="watch in watchs">
                                                                        <td>
                                                                            <img
                                                                                src="/image/images/{{watch.images[0].image_link}}.png">
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.code}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.product.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p style="padding-right: 20px;">
                                                                                {{watch.size.name}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.price}} <u>VND</u></p>
                                                                        </td>
                                                                        <td>
                                                                            <p>{{watch.quantity_stock}}</p>
                                                                        </td>
                                                                        <td>
                                                                            <i ng-click="addToCart(watch)"
                                                                                class='bx bx-cart-add'
                                                                                style="color: black;"></i>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="bottom-data">
                                                        <div class="orders" style="max-height: 250px;overflow-y: auto;">
                                                            <div class="header">
                                                                <i class='bx bx-receipt'></i>
                                                                <h3>Giỏ hàng</h3>
                                                                <div class="dropdown-tienich">
                                                                    <button id="dropdown-toggle" class="btn-dropdown">
                                                                        QR Code sản phẩm <i class='bx bx-qr'></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th>Sản phẩm</th>
                                                                        <th>Tên</th>
                                                                        <th>Giá</th>
                                                                        <th>Số lượng</th>
                                                                        <th>Tổng tiền</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="ordd in order.orderDetails">
                                                                        <!-- <td ><img src="/image/images/shoe-2.png" alt=""></td> -->
                                                                        <td class="tb-anh">
                                                                            <div
                                                                                ng-repeat="image in ordd.watchdetail.images">
                                                                                <img src="/image/images/{{image.image_link}}.png"
                                                                                    alt="">
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-ten">
                                                                            <p>
                                                                                {{ordd.watchdetail.product.name}}
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.watchdetail.price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                        <td class="tb-soluong">
                                                                            <div class="wrapper">
                                                                                <input class="custom-input" type="text"
                                                                                    disabled ng-model="ordd.quantity" />
                                                                            </div>
                                                                        </td>
                                                                        <td class="tb-tien">
                                                                            <p>
                                                                                {{ordd.total_price}}&nbsp;<u>VND</u>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="button" ng-if="order.account!==null">
                                            <button>Xuất QRCode</button>
                                            <button>Cập nhập</button>
                                        </div>
                                        <div class="button" ng-if="order.account===null">
                                            <button ng-click="generateQRCode(order)">Xuất QRCode</button>
                                            <button ng-click="generatePDF(order)">In hóa đơn</button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </main>
    </div>

</body>

</html>